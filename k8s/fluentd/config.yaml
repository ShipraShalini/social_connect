apiVersion: v1
kind: ConfigMap
metadata:
  name: fluentd-config
  namespace: kube-logging
data:
  FLUENT_ELASTICSEARCH_HOST: "elasticsearch.kube-logging.svc.cluster.local"
  FLUENT_ELASTICSEARCH_PORT: "9200"
  FLUENT_ELASTICSEARCH_SCHEME: "http"
  FLUENTD_SYSTEMD_CONF: "disable"
---
kind: ConfigMap
apiVersion: v1
metadata:
  name: fluentd-conf
  namespace: kube-logging
  labels:
    addonmanager.kubernetes.io/mode: Reconcile
data:
  django.conf: |-
    <source>
      @type forward
      port 24224
    </source>

    <match **>
        @type copy
        <store>
          @type elasticsearch
          host elasticsearch
          port 9200
          index_name django
          logstash_format true
          tag_key @log_name
          scheme http
        </store>
        <store>
            @type stdout
        </store>
    </match>
